(()=>{var e={7:e=>{e.exports={parseWebPage:()=>{console.log("parseWebpage")}}}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}(()=>{"use strict";const{parseWebPage:e}=s(7);!function(){function t(t,s){var r,n=!1,i=!1;function o(e,s){var r,n=t("*[data-lob-"+e+"-id]").attr("data-lob-"+e+"-id");if(n)r=t("*[id="+n+"]");else{var i=t("*[data-lob-"+e+"-name]").attr("data-lob-"+e+"-name"),o=t("*[data-lob-"+e+"-class]").attr("data-lob-"+e+"-class");r=t(i?"*[name="+i+"]":o?"."+o:"*[data-lob-"+e+"]")}return function(e,s){if(s&&s.length&&e&&e.length){var r;return e.each((function(e,n){s.is(n.closest("form"))&&(r=t(n))})),r||e}return e}(r,s)}function a(e){var s=o(e);return s.length&&s.attr("data-lob-"+e)||t("*[data-lob-"+e+"-value]").attr("data-lob-"+e+"-value")}function l(e){return void 0!==e?!!e:o("suggestion-stylesheet").length>0}function c(){var e=o("primary"),r=[];return e.each((function(e,n){var i=(n=t(n)).closest("form"),l=function(e){var t=["false","strict","normal","relaxed","passthrough"];if(e&&t.indexOf(e)>-1)return e;var s=a("verify");return s&&t.indexOf(s)>-1?s:"normal"}(s.strictness),c="true"===a("verify-message")||i.length&&!o("verify-message",i).length,m=n.length&&"false"!==a("primary"),d="false"!==l&&i.length&&("passthrough"===l||o("verify-message",i).length||c);r.push({primary:n,form:i,autocomplete:m,verify:d,enrich:d||m,create_message:c,strictness:l})})),r}function m(e,t,s){s||(s=c()[0]);var r={api_key:t.api_key||a("key"),strictness:s.strictness,denormalize:"false"!==a("secondary"),suppress_stylesheet:l(t.stylesheet),styles:t.styles||{"err-color":"#117ab8","err-bgcolor":"#eeeeee","suggestion-color":"#666666","suggestion-bgcolor":"#fefefe","suggestion-bordercolor":"#a8a8a8","suggestion-activecolor":"#117ab8","suggestion-activebgcolor":"#eeeeee"},elements:t.elements||{errorAnchorElement:o("verify-message-anchor",s.form),form:s.form,message:o("verify-message",s.form).hide(),primary:o("primary",s.form),primaryMsg:o("primary-message",s.form).hide(),secondary:o("secondary",s.form),secondaryMsg:o("secondary-message",s.form).hide(),city:o("city",s.form),cityMsg:o("city-message",s.form).hide(),state:o("state",s.form),stateMsg:o("state-message",s.form).hide(),zip:o("zip",s.form),zipMsg:o("zip-message",s.form).hide()},messages:t.messages||{primary_line:a("err-primary-line")||"Enter the Primary address.",city_state_zip:a("err-city-state-zip")||"Enter City and State (or Zip).",zip:a("err-zip")||"Enter a valid Zip.",undeliverable:a("err-undeliverable")||"The address could not be verified.",deliverable_missing_unit:a("err-missing-unit")||"Enter a Suite or Unit.",deliverable_unnecessary_unit:a("err-unnecessary-unit")||"Suite or Unit unnecessary.",deliverable_incorrect_unit:a("err-incorrect-unit")||"Incorrect Unit. Please confirm.",confirm:a("err-confirm")||"Did you mean",DEFAULT:a("err-default")||"Unknown Error. The address could not be verified."},apis:t.apis||{verify:"https://api.lob.com/v1/us_verifications",autocomplete:"https://api.lob.com/v1/us_autocompletions"},do:{init:function(){m(e,t,s)}}};function d(e,t,s){return a(t+"-"+s)||e.styles[t+"-"+s]}return s.autocomplete&&(r.suppress_stylesheet||n||(n=!0,e("<style>").prop("type","text/css").html("            .algolia-autocomplete {              display:"+function(e){return"block"===e.elements.primary.css("display").toLowerCase()?"block":""}(r)+";              width: "+function(e){return"block"===e.elements.primary.css("display").toLowerCase()?"100%":e.elements.primary.css("width")||e.elements.primary.outerWidth()+"px"}(r)+";              vertical-align: middle;            }            .aa-dropdown-menu {              width: 100%;              border: 1px solid "+d(r,"suggestion","bordercolor")+";              border-top: 0;              background-color: "+d(r,"suggestion","bgcolor")+";              overflow: hidden;              border-radius: 0 0 .25rem .25rem;              margin-top:-5px;            }            .aa-suggestion {              cursor: pointer;              padding: 6px 12px;              color: "+d(r,"suggestion","color")+";            }            .aa-suggestion:hover,            .aa-suggestion:active,            .aa-suggestion.aa-cursor  {              color: "+d(r,"suggestion","activecolor")+";              background-color: "+d(r,"suggestion","activebgcolor")+";            }            .aa-suggestion div {              white-space: nowrap !important;              overflow: hidden;              text-overflow: ellipsis;            }            .aa-suggestion span {              font-size: .8em;            }").appendTo("head")),r.do.autocomplete=function(e,t){if(e.match(/[A-Za-z0-9]/)){var s=new XMLHttpRequest,n=r.apis.autocomplete+"?av_elements_origin="+window.location.href;s.open("POST",n,!0),s.setRequestHeader("Content-Type","application/json"),r.api_key&&s.setRequestHeader("Authorization","Basic "+btoa(r.api_key+":")),s.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE)if(200===this.status)try{var e=JSON.parse(s.responseText);t(e.suggestions)}catch(e){t(null)}else 401===this.status?(console.log("Please sign up on lob.com to get a valid api key."),t(null)):t(null)},s.send(JSON.stringify({address_prefix:e,city:r.elements.city.val(),zip_code:r.elements.zip.val(),state:r.elements.state.val(),geo_ip_sort:!0}))}return!1},r.do.apply=function(e){r.elements.primary.autocomplete("val",e.primary_line),r.elements.secondary.val(""),r.elements.city.val(e.city),r.elements.state.val(e.state),r.elements.zip.val(e.zip_code)},r.elements.primary.autocomplete({hint:!1},{source:r.do.autocomplete,templates:{suggestion:function(t){var s=e("<div></div>"),r=e("<span></span>");return s.text(t.primary_line+" "),r.text(t.city+", "+t.state+" "+t.zip_code),s.append(r),s}},cache:!1}).on("autocomplete:selected",(function(e,t){r.do.apply(t)}))),s.verify&&function(){function t(t,s){var r=e._data(t[0],"events");r[s].unshift(r[s].pop())}function n(e){return"primary_line is required or address is required"===e?"primary_line":"zip_code is required or both city and state are required"===e?"city_state_zip":"zip_code must be in a valid zip or zip+4 format"===e?"zip":e in r.messages?e:"DEFAULT"}if(s.create_message){var o=e('<div class="lob-verify-message"></div>'),a=r.elements.errorAnchorElement;a.length?o.insertBefore(a):r.elements.form.prepend(o),r.elements.message=o,i||(i=!0,e("<style>").prop("type","text/css").html("              .lob-verify-message {                display: none;                width: 100%;                border-radius: .25rem;                max-width: 100%;                position: relative;                left: 50%;                margin-right: -50%;                transform: translate(-50%, -50%);                text-align: center;                padding: .5rem;                margin-top: 1.5rem;                margin-bottom: 1.5rem;                color: "+d(r,"err","color")+";                background-color: "+d(r,"err","bgcolor")+";              }").appendTo("head"))}function l(e){var t=[];return e.zip_code&&t.push(e.zip_code),e.zip_code_plus_4&&t.push(e.zip_code_plus_4),t.length?t.join("-"):""}function c(e){var t=function(e,t){var s=e.components&&e.components.secondary_designator||"";if(e.secondary_line||!r.denormalize)return{secondary_line:e.secondary_line,primary_line:e.primary_line};if(s&&t){var n=e.primary_line.split(s);return{secondary_line:s+" "+n[1].trim(),primary_line:n[0].trim()}}return{secondary_line:e.secondary_line,primary_line:e.primary_line}}(e,!!r.elements.secondary.val());return{primary:t.primary_line,secondary:t.secondary_line,city:e.components&&e.components.city||"",state:e.components&&e.components.state||"",zip:l(e.components)}}function m(){r.elements.message.hide(),r.elements.primaryMsg.hide(),r.elements.secondaryMsg.hide(),r.elements.cityMsg.hide(),r.elements.stateMsg.hide(),r.elements.zipMsg.hide()}function u(e,t){for(var s in t)e=e.replace("{"+s+"}",t[s]);return e}r.do.fixAndSave=function(e,t){var s;t=void 0===t||t;var n=r.address=c(e);for(var i in n)if(n.hasOwnProperty(i)){var o=r.elements[i].val();!(n[i].toUpperCase()!==o.toUpperCase())||"zip"===i&&5===o.length&&0===n[i].indexOf(o)||(s=!0),t&&r.elements[i].val(n[i])}return s},r.do.message=function(e){e&&("confirm"===e.type?r.elements.message.html(e.msg).show("slow"):r.elements.message.text(e.msg).show("slow"),p[e.type]&&p[e.type](r.messages[e.type]))};var p={primary_line:function(e){r.elements.primaryMsg.text(e).show("slow")},city_state_zip:function(e){r.elements.cityMsg.text(e).show("slow"),r.elements.stateMsg.text(e).show("slow"),r.elements.zipMsg.text(e).show("slow")},zip:function(e){r.elements.zipMsg.text(e).show("slow")},deliverable_missing_unit:function(e){!r.denormalize&&r.elements.primaryMsg.text(e).show("slow")||r.elements.secondaryMsg.text(e).show("slow")},deliverable_unnecessary_unit:function(e){!r.denormalize&&r.elements.primaryMsg.text(e).show("slow")||r.elements.secondaryMsg.text(e).show("slow")},deliverable_incorrect_unit:function(e){!r.denormalize&&r.elements.primaryMsg.text(e).show("slow")||r.elements.secondaryMsg.text(e).show("slow")}};r.do.verify=function(e){r.submit="passthrough"===r.strictness,r.confirmed=function(){if("passthrough"!==r.strictness&&r.address){for(var e in r.address)if(r.address.hasOwnProperty(e)&&r.elements[e].val().toUpperCase()!==r.address[e].toUpperCase())return!1;return!0}return!1}();var t={primary_line:r.elements.primary.val(),secondary_line:r.elements.secondary.val(),city:r.elements.city.val(),state:r.elements.state.val(),zip_code:r.elements.zip.val()},s=new XMLHttpRequest,i=r.apis.verify+"?av_elements_origin="+window.location.href;return s.open("POST",i,!0),s.setRequestHeader("Content-Type","application/json"),r.api_key&&s.setRequestHeader("Authorization","Basic "+btoa(r.api_key+":")),s.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var t,i=function(e){try{return JSON.parse(e)}catch(e){return console.log("ERR",e),{error:{message:"DEFAULT"}}}}(s.responseText);if(this.status&&200!==this.status||i.statusCode&&200!==i.statusCode)401===this.status?(console.log("Please sign up on lob.com to get a valid api key."),e(null,!0)):(t=n((i=i&&i.body||i).error.message),e({msg:r.messages[t],type:t}));else if(function(e,t,s){var r=t.do.fixAndSave(e,!1);return!s||"deliverable"===e.deliverability&&!r||"undeliverable"===e.deliverability&&t.confirmed&&"relaxed"===t.strictness||"deliverable_missing_unit"===e.deliverability&&t.confirmed&&"strict"!==t.strictness||"deliverable_unnecessary_unit"===e.deliverability&&t.confirmed&&"strict"!==t.strictness||"deliverable_incorrect_unit"===e.deliverability&&t.confirmed&&"strict"!==t.strictness}(i=i&&i.body||i,r,this.status))e(null,!0);else if("deliverable"===i.deliverability){var o=function(e){var t=c(e),s=r.messages.confirm,n=u("{0} {1} {2} {3} {4}",[t.primary,t.secondary,t.city,t.state,t.zip]);return u('<span style="cursor: pointer">{0} <span style="text-decoration: underline">{1}</span>?</span>',[s,n])}(i);r.elements.message.click((function(){r.do.fixAndSave(i),m(),r.elements.message.off("click")})),e({msg:o,type:"confirm"})}else t=n(i.deliverability),e({msg:r.messages[t],type:t})}},s.send(JSON.stringify(t)),!1},r.elements.form.on("submit",(function e(s){return s.stopImmediatePropagation(),s.preventDefault(),m(),r.elements.message.off("click"),r.do.verify((function(s,n){r.submit?(r.do.message(s),r.elements.form.off("submit",e),r.submitted=!0,r.elements.form.submit(),r.elements.form.on("submit",e),t(r.elements.form,"submit")):n?(r.elements.form.off("submit",e),r.elements.form.submit()):r.do.message(s)}))})),t(r.elements.form,"submit")}(),window.LobAddressElements=r}return e(),(r=window.MutationObserver||window.WebKitMutationObserver)&&new r((function(){c().forEach((function(e){var r=e.form&&e.form.attr("data-lob-state")||"untouched";"untouched"===r&&e.enrich?(e.form.attr("data-lob-state","enriched"),setTimeout((function(){m(t,s,e)}),0)):"enriched"!==r||e.enrich||e.form.attr("data-lob-state","untouched")}))})).observe(window.document.body,{subtree:!0,attributes:!0,childList:!0}),c().length?m(t,s):{do:{init:function(){m(t,s)}}}}var s="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js",r="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.37.0/autocomplete.jquery.min.js",n={load:function(){var e=Array.prototype.slice.call(arguments[0]),t=n[e.shift()];t&&t.apply(this,e)},jquery:function(){if(window.jQuery)n.load(arguments);else{var e=arguments,t=document.createElement("script");t.onload=function(){n.load(e)},t.src=s,document.getElementsByTagName("body")[0].appendChild(t)}},jquery_autocomplete:function(){if(window.jQuery.fn.autocomplete)n.load(arguments);else{var e=document.createElement("script"),t=arguments;e.onload=function(){n.load(t)},e.src=r,document.getElementsByTagName("body")[0].appendChild(e)}},address_elements:function(){if(window.LobAddressElements)n.load(arguments);else{var e=window.LobAddressElementsConfig||{};window.LobAddressElements=new t(window.jQuery,e),n.load(arguments)}}};n.load(["jquery","jquery_autocomplete","address_elements"])}()})()})();
//# sourceMappingURL=lob-address-elements-1.3.2.min.js.map