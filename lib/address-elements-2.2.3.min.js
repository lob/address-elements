(()=>{var e={787:e=>{var t=function(){"use strict";var e=0;function t(e){var t=[],n=0,i=0;this.push=function(s){e<=n-i&&e<=++i&&(i=0,n=e-1),t[n%e]=s,n++},this.asArray=function(){var s=t.slice(i,Math.min(n,e)),r=t.slice(0,Math.max(n-e,0));return s.concat(r)},this.list=t}function n(t,n){for(var i=n,s=0;s<t.length;s++){var r=t[s],a=i.r;a[r]||(a[r]={w:r,r:{},i:e++}),i=a[r]}return i}function i(e,t,n){var i;return n[e]?i=n[e]:(i=function(e,t){for(var n=[[t,0]],i={},s=[];n.length;){var r=n.shift(),a=r[0],o=r[1],l=a.r,c=e[o];if(void 0===c&&a.fn&&!i[a.i]?(i[a.i]=1,s.push(a.fn)):l[c]&&n.push([l[c],o+1]),l["#"])for(var d=o;d<=e.length;d++)n.push([l["#"],d]);c&&l["*"]&&n.push([l["*"],o+1])}return s}(e.split("."),t),n[e]=i),i}function s(){var s={w:"",r:{},i:e++},r={},a=new t(9999);this.emit=function e(t,n){var o=Date.now();a.push([t,o]);for(var l=i(t,s,r),c=[],d={topic:t,ts:o},u=0;u<l.length;u++)for(var m=l[u],p=0;p<m.length;p++)try{c.push(m[p](n,d))}catch(t){if(!(0<i("error",s,r).length))throw t;e("error",t)}return c},this.on=function(e,t){var i=n(e.split("."),s),a=i.fn||[];return a.push(t),i.fn=a,r={},function(){var e=a.indexOf(t);-1<e&&a.splice(e,1)}},this.history=function(t){var s={w:"",r:{},i:e++};n(t.split("."),s).fn=1;for(var r=[],o={},l=a.asArray(),c=0;c<l.length;c++){var d=l[c];i(d[0],s,o).length&&r.push(d)}return r}}return s.Ring=t,s}();e.exports=t}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};(()=>{"use strict";n.d(i,{J:()=>x});const e=["united states","united states of america","us","u.s","u.s.","usa","u.s.a","u.s.a"],t=t=>t&&t.length&&!e.includes(t.val().toLowerCase()),s={afghanistan:"AF","aland islands":"AX",albania:"AL",algeria:"DZ","american samoa":"AS",andorra:"AD",angola:"AO",anguilla:"AI",antarctica:"AQ","antigua and barbuda":"AG",argentina:"AR",armenia:"AM",aruba:"AW",australia:"AU",austria:"AT",azerbaijan:"AZ",bahamas:"BS",bahrain:"BH",bangladesh:"BD",barbados:"BB",belarus:"BY",belgium:"BE",belize:"BZ",benin:"BJ",bermuda:"BM",bhutan:"BT",bolivia:"BO","bonaire, saint eustatius and saba":"BQ","bosnia and herzegovina":"BA",botswana:"BW","bouvet island":"BV",brazil:"BR","british indian ocean territory":"IO","british virgin islands":"VG",brunei:"BN",bulgaria:"BG","burkina faso":"BF",burundi:"BI",cambodia:"KH",cameroon:"CM",canada:"CA","cape verde":"CV","cayman islands":"KY","central african republic":"CF",chad:"TD",chile:"CL",china:"CN","christmas island":"CX","cocos islands":"CC",colombia:"CO",comoros:"KM","cook islands":"CK","costa rica":"CR",croatia:"HR",cuba:"CU",curacao:"CW",cyprus:"CY","czech republic":"CZ","democratic republic of the congo":"CD",denmark:"DK",djibouti:"DJ",dominica:"DM","dominican republic":"DO","east timor":"TL",ecuador:"EC",egypt:"EG","el salvador":"SV","equatorial guinea":"GQ",eritrea:"ER",estonia:"EE",ethiopia:"ET","falkland islands":"FK","faroe islands":"FO",fiji:"FJ",finland:"FI",france:"FR","french guiana":"GF","french polynesia":"PF","french southern territories":"TF",gabon:"GA",gambia:"GM",georgia:"GE",germany:"DE",ghana:"GH",gibraltar:"GI",greece:"GR",greenland:"GL",grenada:"GD",guadeloupe:"GP",guam:"GU",guatemala:"GT",guernsey:"GG",guinea:"GN","guinea-bissau":"GW",guyana:"GY",haiti:"HT","heard island and mcdonald islands":"HM",honduras:"HN","hong kong":"HK",hungary:"HU",iceland:"IS",india:"IN",indonesia:"ID",iran:"IR",iraq:"IQ",ireland:"IE","isle of man":"IM",israel:"IL",italy:"IT","ivory coast":"CI",jamaica:"JM",japan:"JP",jersey:"JE",jordan:"JO",kazakhstan:"KZ",kenya:"KE",kiribati:"KI",kosovo:"XK",kuwait:"KW",kyrgyzstan:"KG",laos:"LA",latvia:"LV",lebanon:"LB",lesotho:"LS",liberia:"LR",libya:"LY",liechtenstein:"LI",lithuania:"LT",luxembourg:"LU",macao:"MO",macedonia:"MK",madagascar:"MG",malawi:"MW",malaysia:"MY",maldives:"MV",mali:"ML",malta:"MT","marshall islands":"MH",martinique:"MQ",mauritania:"MR",mauritius:"MU",mayotte:"YT",mexico:"MX",micronesia:"FM",moldova:"MD",monaco:"MC",mongolia:"MN",montenegro:"ME",montserrat:"MS",morocco:"MA",mozambique:"MZ",myanmar:"MM",namibia:"NA",nauru:"NR",nepal:"NP",netherlands:"NL","netherlands antilles":"AN","new caledonia":"NC","new zealand":"NZ",nicaragua:"NI",niger:"NE",nigeria:"NG",niue:"NU","norfolk island":"NF","north korea":"KP","northern mariana islands":"MP",norway:"NO",oman:"OM",pakistan:"PK",palau:"PW","palestinian territory":"PS",panama:"PA","papua new guinea":"PG",paraguay:"PY",peru:"PE",philippines:"PH",pitcairn:"PN",poland:"PL",portugal:"PT","puerto rico":"PR",qatar:"QA","republic of the congo":"CG",reunion:"RE",romania:"RO",russia:"RU",rwanda:"RW","saint barthelemy":"BL","saint helena":"SH","saint kitts and nevis":"KN","saint lucia":"LC","saint martin":"MF","saint pierre and miquelon":"PM","saint vincent and the grenadines":"VC",samoa:"WS","san marino":"SM","sao tome and principe":"ST","saudi arabia":"SA",senegal:"SN",serbia:"RS","serbia and montenegro":"CS",seychelles:"SC","sierra leone":"SL",singapore:"SG","sint maarten":"SX",slovakia:"SK",slovenia:"SI","solomon islands":"SB",somalia:"SO","south africa":"ZA","south georgia and the south sandwich islands":"GS","south korea":"KR","south sudan":"SS",spain:"ES","sri lanka":"LK",sudan:"SD",suriname:"SR","svalbard and jan mayen":"SJ",swaziland:"SZ",sweden:"SE",switzerland:"CH",syria:"SY",taiwan:"TW",tajikistan:"TJ",tanzania:"TZ",thailand:"TH",togo:"TG",tokelau:"TK",tonga:"TO","trinidad and tobago":"TT",tunisia:"TN",turkey:"TR",turkmenistan:"TM","turks and caicos islands":"TC",tuvalu:"TV","u.s. virgin islands":"VI",uganda:"UG",ukraine:"UA","united arab emirates":"AE","united kingdom":"GB","united states":"US","united states minor outlying islands":"UM",uruguay:"UY",uzbekistan:"UZ",vanuatu:"VU",vatican:"VA",venezuela:"VE",vietnam:"VN","wallis and futuna":"WF","western sahara":"EH",yemen:"YE",zambia:"ZM",zimbabwe:"ZW"},r=(e,t)=>{if(t&&t.length&&e&&e.length){let n;return e.each((function(e,i){t.is(i.closest("form"))&&(n=$(i))})),n||e}return e},a=(e,t=null)=>{let n;const i=$("*[data-lob-"+e+"-id]").attr("data-lob-"+e+"-id");if(i)n=$("*[id="+i+"]");else{const t=$("*[data-lob-"+e+"-name]").attr("data-lob-"+e+"-name"),i=$("*[data-lob-"+e+"-class]").attr("data-lob-"+e+"-class");t?n=$("*[name="+t+"]"):i?n=$("."+i):(n=$("*[data-lob-"+e+"]"),"state"===e&&n.length>0&&"form"===n.get(0).nodeName.toLowerCase()&&(n=[]))}return r(n,t)},o=(e,t)=>{const n=a(e,t);return n.length&&n.attr("data-lob-"+e)||$("*[data-lob-"+e+"-value]").attr("data-lob-"+e+"-value")},l=e=>e.reduce(((e,t)=>{return[...e,t,(n=t,n.charAt(0).toUpperCase()+n.slice(1)),t.toUpperCase()];var n}),[]),c={primary:l(["primary","address","address1","street"]),secondary:l(["address 2","address2","street 2","secondary","apartment","suite","building","unit","apt","ste","bldg"]),city:l(["city","town"]),state:l(["state","province","county","district","municipality"]),zip:l(["zip","postal","postcode"]),country:l(["country"])},d=(e,t)=>{const n=a(e,t);return n.length?n:null},u=(e,t)=>{const n=c[e].map((e=>`:contains('${e}')`)).join(", ");let i=$(n);if("primary"===e&&(i=i.filter(((e,t)=>!/(address|street)\s?2/i.test($(t).text())))),!i.length)return null;const s=i.filter("label");let a=$();return s.each(((e,t)=>{const n=(e=>{const t=e.htmlFor;if(t)return $(`*[id=${t}]`);const n=$(e).siblings("input");if(n.length)return n;const i=$(e).children("input");if(i.length)return i;const s=$(e).parentsUntil("form","input");return s.length?s:$()})(t);a=a.add(n)})),a.length?r(a,t):null},m=e=>{const t={...c};"secondary"===e&&(t.secondary=t.secondary.concat(l(["address"])));const n=t[e].map((e=>`input[id*='${e}'], select[id*='${e}']`)).join(", ");let i=$(n);return"primary"===e?i=i.filter(":not(input[name*='2']):not(input[for*='2']):not(input[id*='2'])"):"secondary"===e&&(i=i.filter(":not(input[name*='1']):not(input[for*='1']):not(input[id*='1'])")),i.length?i:null},p=e=>{const n="https://help.lob.com/integrations-av/av-elements#troubleshooting";let i="";const s=t(e.country),r=Object.keys(e).filter((t=>{if("country"===t)return!1;if("state"===t&&s)return!1;const n=e[t];return null===n||n&&0===n.length})),a=Object.keys(e).filter((t=>{const n=e[t];return n&&n.filter(":visible").length>1}));if(r.length){const e=r.length>1?`${r.slice(0,-1).join(", ")}, and ${r.slice(-1)}`:r[0].toString(),t=r.map((e=>`data-lob-${e}-id`)).join(", "),s=`[Lob AV Elements Error]:\tMissing form elements\nCould not find inputs for ${e}.\nPlease add the following attributes to the AV elements script: ${t}\nFor more information visit: ${n}`,a=`<p style="text-align: left">[Lob AV Elements Error] Missing form elements<br/>Could not find inputs for ${e}. Please add the following attributes to the AV elements script: <strong>${t}</strong>.<br/>For more information visit <a href="${n}">${n}</a></p>`;console.error(s),i=a}if(a.length){const e=a.length>1?`${a.slice(0,-1).join(", ")}, and ${a.slice(-1)}`:a[0].toString(),t=a.map((e=>`data-lob-${e}-id`)).join(", "),s=`[Lob AV Elements Error]:\tDuplicate form elements\nMultiple form elements were found for ${e}.\nPlease specify them by adding the following attributes to the AV elements script: ${t}\nFor more information visit: ${n}`,r=`<p style="text-align: left">[Lob AV Elements Error] Duplicate form elements<br/>Multiple form elements were found for ${e}. Please specify them by adding the following attributes to the AV elements script: <strong>${t}</strong>.<br/>For more information visit <a href="${n}">${n}</a></p>`;console.error(s),i+=r}return i},g=e=>{const t={errorAnchorElement:a("verify-message-anchor",e),primaryMsg:a("primary-message",e).hide(),secondaryMsg:a("secondary-message",e).hide(),cityMsg:a("city-message",e).hide(),stateMsg:a("state-message",e).hide(),zipMsg:a("zip-message",e).hide(),countryMsg:a("country-message",e).hide(),message:a("verify-message",e).hide()},n={};return["primary","secondary","city","state","zip","country"].forEach((t=>{n[t]=d(t,e),n[t]||(n[t]=u(t,e)),(!n[t]||n[t]&&n[t].length>1)&&(n[t]=m(t))})),{...t,...n,parseResultError:p(n),form:e}};function h(e,t,n){return o(t+"-"+n)||e.styles[t+"-"+n]}class f{constructor(e,t){this.config=e,this.query="",t.on("input",(e=>{this.query=e.target.value,this.getSuggestions((e=>{if(!e)return;const n=this.generateSuggestionListItems(e),i=$("#lob-dropdown");if(i.length)i.empty().append(n);else{const e=$('\n                <div id="lob-dropdown" class="lob-dropdown-menu"></div>\n              ');e.append(n),t.after(e)}}))}))}getSuggestions(e){const{apis:n,api_key:i,channel:s,elements:r}=this.config;if(this.config.international=t(r.country),this.config.international)return!1;if(this.query.match(/[A-Za-z0-9]/)){const t=new XMLHttpRequest,a=new URL(n.autocomplete);a.searchParams.append("av_integration_origin",window.location.href),a.searchParams.append("integration","av-elements"),a.searchParams.append("valid_addresses","true"),a.searchParams.append("case","proper"),t.open("POST",a,!0),t.setRequestHeader("Content-Type","application/json"),i&&t.setRequestHeader("Authorization","Basic "+btoa(i+":")),t.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE)if(200===this.status)try{const n=JSON.parse(t.responseText);s.emit("elements.us_autocompletion.suggestion",{suggestions:n.suggestions,form:r.form[0]}),e(n.suggestions)}catch(t){e(null)}else 401===this.status?(console.log("Please sign up on lob.com to get a valid api key."),s.emit("elements.us_autocompletion.error",{code:401,message:"Please sign up on lob.com to get a valid api key.",form:r.form[0]}),e(null)):(s.emit("elements.us_autocompletion.error",{code:500,message:"Unknown error.",form:r.form[0]}),e(null))},t.send(JSON.stringify({address_prefix:this.query,city:r.city.val(),zip_code:r.zip.val(),state:r.state.val(),geo_ip_sort:!0}))}return!1}applySuggestion(e){const{elements:t}=this.config;t.primary.val(e.primary_line),t.secondary.val(""),t.city.val(e.city),t.state.val(e.state.toUpperCase()),t.zip.val(e.zip_code),$("#lob-dropdown").remove(),this.config.channel.emit("elements.us_autocompletion.selection",{selection:e,form:t.form[0]})}formatAddress(e){const{primary_line:t,city:n,state:i,zip_code:s}=e;let r=0;this.query.split("").forEach((e=>{e.toLowerCase()===t.charAt(r).toLowerCase()&&(r+=1)}));const a=0===r?`${t},`:r===t.length?`<strong>${t},</strong>`:`<span>\n          <strong>${t.substring(0,r)}</strong>${t.substring(r)},\n        </span>`;return $(`\n          <div class="lob-suggestion" tabindex="0">\n            ${a}\n            <span class="lob-light-text">\n              ${n},&nbsp;${i.toUpperCase()},&nbsp;${s}\n            </span>\n          </div>\n        `)}generateSuggestionListItems(e){const t=$('\n          <div>\n            \x3c!-- Header --\x3e\n            <div class="lob-label">\n              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1259 602" class="lob-logo">\n                <path d="M1063,141c-47.06,0-89,18.33-121,50.78V0H780V338.74C765,222.53,666.88,138,540,138c-137,0-242,101-242,232a235,235,0,0,0,7.7,60H164V0H0V585H307l14.54-112.68C359.94,550,441.74,602,540,602c127.75,0,225.08-83.62,240-200.41V585H930V540.27c31.8,37,77.27,56.73,133,56.73,103,0,196-109,196-228C1259,239,1175,141,1063,141ZM540,450c-45,0-81-36-81-80s36-80,81-80c46,0,81,35,81,80S585,450,540,450Zm475-1c-46,0-83-36-83-80a82.8,82.8,0,0,1,82.6-83h.4c47,0,85,37,85,83C1100,413,1062,449,1015,449Z" fill="#0099d7" data-v-716a89fc=""></path>\n              </svg>\n              <span class="lob-light-text">Deliverable addresses</span>\n              <a href="https://www.lob.com/address-verification?utm_source=autocomplete&amp;utm_medium=vue">\n                Learn more\n              </a>\n            </div>\n            \x3c!-- List Suggestions --\x3e\n          </div>\n        ');return e.forEach((e=>{const n=this.formatAddress(e).on("click",(()=>{this.applySuggestion(e)})).on("keypress",(t=>{"Enter"==t.key&&this.applySuggestion(e)}));t.append(n)})),t}}const y=(e,t)=>{const n=Object.keys(e).length<=1&&e.constructor===Object;return void 0===e||n?a("suggestion-stylesheet",t).length>0:!!e};let b=!1,v=!1;class w{constructor(e,t,n){this.pageState=n||x()[0],this.config={channel:t.channel,api_key:t.api_key||o("key"),autosubmit:n.autosubmit,strictness:this.pageState.strictness,denormalize:"false"!==o("secondary"),suppress_stylesheet:y(t),styles:t.styles||{"err-color":"#117ab8","err-bgcolor":"#eeeeee","suggestion-color":"#111111","suggestion-bgcolor":"#ffffff","suggestion-bordercolor":"#a8a8a8","suggestion-activecolor":"#111111","suggestion-activebgcolor":"#eeeeee","suggestion-bordercolor":"#eeeeee"},elements:t.elements||g(this.pageState.form),messages:t.messages||{primary_line:o("err-primary-line")||"Enter the Primary address.",city_state_zip:o("err-city-state-zip")||"Enter City and State (or Zip).",country:o("err-country")||"Enter a country",zip:o("err-zip")||"Enter a valid Zip.",undeliverable:o("err-undeliverable")||"The address could not be verified.",deliverable_missing_unit:o("err-missing-unit")||"Enter a Suite or Unit.",deliverable_unnecessary_unit:o("err-unnecessary-unit")||"Suite or Unit unnecessary.",deliverable_incorrect_unit:o("err-incorrect-unit")||"Incorrect Unit. Please confirm.",confirm:o("err-confirm")||"Did you mean",DEFAULT:o("err-default")||"Unknown Error. The address could not be verified."},do:{init:function(){w(e,t,this.pageState)}}};const i="staging"===o("env")?"https://api.lob-staging.com":"https://api.lob.com";this.config.apis=t.apis||{autocomplete:i+"/v1/us_autocompletions",intl_verify:i+"/v1/intl_verifications",us_verify:i+"/v1/us_verifications"},this.pageState.autocomplete&&this.configureAutocompletion(),this.pageState.verify&&this.configureVerification(),this.config.channel.emit("elements.enriched",{config:this.config,form:this.config.elements.form[0]})}hideMessages(){const{elements:e}=this.config;e.message.hide(),e.primaryMsg.hide(),e.secondaryMsg.hide(),e.cityMsg.hide(),e.stateMsg.hide(),e.zipMsg.hide()}showMessage(e){const{channel:t,elements:{message:n,primaryMsg:i,secondaryMsg:s,cityMsg:r,stateMsg:a,zipMsg:o,form:l},messages:c,denormalize:d}=this.config,u={primary_line:e=>{i.text(e).show("slow")},city_state_zip:e=>{r.text(e).show("slow"),a.text(e).show("slow"),o.text(e).show("slow")},zip:e=>{o.text(e).show("slow")},deliverable_missing_unit:e=>{!d&&i.text(e).show("slow")||s.text(e).show("slow")},deliverable_unnecessary_unit:e=>{!d&&i.text(e).show("slow")||s.text(e).show("slow")},deliverable_incorrect_unit:e=>{!d&&i.text(e).show("slow")||s.text(e).show("slow")}};e&&("confirm"===e.type||"form_detection"===e.type?n.html(e.msg).show("slow"):n.text(e.msg).show("slow"),u[e.type]&&u[e.type](c[e.type]),t.emit("elements.us_verification.alert",{error:e,type:e.type,form:l[0]}))}configureAutocompletion(){const{elements:e,suppress_stylesheet:t}=this.config;var n;t||b||(b=!0,$("<style>").prop("type","text/css").html((n=this.config,`  \n  .lob-dropdown-menu {\n    box-sizing: border-box;\n    box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.08);\n    border: 1px solid ${h(n,"suggestion","bordercolor")};\n    border-radius: 0 0 .25rem .25rem;\n    border-top: 0;\n    background-color: ${h(n,"suggestion","bgcolor")};\n    display: ${(e=>"block"===e.elements.primary.css("display").toLowerCase()?"block":"")(n)};\n    vertical-align: middle;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    position: absolute;\n    margin-top: 0.5rem;\n    max-height: 400px;\n    width: ${(e=>"block"===e.elements.primary.css("display").toLowerCase()?"100%":e.elements.primary.css("width")||e.elements.primary.outerWidth()+"px")(n)};\n  }\n\n  .lob-label {\n    align-items: center;\n    border-bottom: 1px solid #DDDDDD;\n    cursor: pointer;\n    display: flex;\n    font-size: 17px;\n    padding: 1rem;\n  }\n\n  .lob-label > a {\n    font-weight: 600;\n    color: #0699D6;\n    text-decoration: inherit;\n    margin-left: 12px;\n  }\n\n  .lob-label > span {\n    flex: 1;\n    margin-left: 12px;\n    margin-top: auto;\n  }\n\n  .lob-logo {\n    height: 21px;\n  }\n\n  .lob-suggestion {\n    cursor: pointer;\n    padding: 12px;\n    color: ${h(n,"suggestion","color")};\n  }\n\n  .lob-suggestion:hover,\n  .lob-suggestion:active,\n  .lob-suggestion:focus-visible {\n    color: ${h(n,"suggestion","activecolor")};\n    background-color: ${h(n,"suggestion","activebgcolor")};\n  }\n\n  .lob-suggestion div {\n    white-space: nowrap !important;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .lob-suggestion span {\n    font-size: .8em;\n  }\n\n  .lob-light-text {\n    color: #888888;\n  }\n`)).appendTo("head")),this.autocomplete=new f(this.config,e.primary)}parseJSON(e){try{return JSON.parse(e)}catch(e){return console.log("Error parsing json",e),{error:{message:"DEFAULT"}}}}plus4(e){const t=[];return e.zip_code&&t.push(e.zip_code),e.zip_code_plus_4&&t.push(e.zip_code_plus_4),t.length?t.join("-"):""}denormalizeParts(e,t){const n=e.components&&e.components.secondary_designator||"";if(e.secondary_line||!this.config.denormalize)return{secondary_line:e.secondary_line,primary_line:e.primary_line};if(n&&t){const t=e.primary_line.split(n);return{secondary_line:`${n} ${t[1].trim()}`,primary_line:t[0].trim()}}return{secondary_line:e.secondary_line,primary_line:e.primary_line}}formatAddressFromResponseData(e){const{components:t}=e,n=this.denormalizeParts(e,!!this.config.elements.secondary.val());return{primary:n.primary_line,secondary:n.secondary_line,city:t&&t.city||"",state:t&&t.state||"",zip:this.config.international?t.postal_code:this.plus4(t)}}fixAndSave(e,t=!0){const{elements:n,international:i}=this.config;let s=!1;const r=this.config.address=this.formatAddressFromResponseData(e);for(let e in r)if(r.hasOwnProperty(e)){const a=n[e].val(),o=r[e].toUpperCase()!==a.toUpperCase(),l=!("zip"===e&&5===a.length&&0===r[e].indexOf(a));o&&!i&&l&&(s=!0),t&&n[e].val(r[e])}return s}resolveErrorType(e){return"primary_line is required or address is required"===e?"primary_line":"zip_code is required or both city and state are required"===e?"city_state_zip":"zip_code must be in a valid zip or zip+4 format"===e?"zip":"country is required"===e?"country":e in this.config.messages?e:"DEFAULT"}isConfirmation(){const{address:e,elements:t,strictness:n}=this.config;if("passthrough"!==n&&e){for(let n in e)if(e.hasOwnProperty(n)&&t[n].val().toUpperCase()!==e[n].toUpperCase())return!1;return!0}return!1}isVerified(e,t){const{confirmed:n,strictness:i}=this.config,s=this.fixAndSave(e,!1);return!t||"deliverable"===e.deliverability&&!s||"undeliverable"===e.deliverability&&n&&"passthrough"===i||"deliverable_missing_unit"===e.deliverability&&n&&"strict"!==i||"deliverable_unnecessary_unit"===e.deliverability&&n&&"strict"!==i||"deliverable_incorrect_unit"===e.deliverability&&n&&"strict"!==i}format(e,t){for(let n in t)e=e.replace("{"+n+"}",t[n]);return e}createDidYouMeanMessage(e){const{primary:t,secondary:n,city:i,state:s,zip:r}=this.formatAddressFromResponseData(e);return`\n      <span style="cursor: pointer">\n        ${this.config.messages.confirm} <span style="text-decoration: underline">${`${t} ${n} ${i} ${s} ${r}`}</span>?\n      </span>\n    `}verify(e){const{apis:n,api_key:i,channel:r,elements:{primary:a,secondary:o,city:l,state:c,zip:d,country:u,message:m,form:p},messages:g}=this.config;this.config.international=t(u),this.config.submit="passthrough"===this.config.strictness,this.config.confirmed=this.isConfirmation();const h={primary_line:a.val(),secondary_line:o.val(),city:l.val(),state:c.val()};if(this.config.international){const e=u.val().toLowerCase();h.country=2===u.length?e:s[e],h.postal_code=d.val()}else h.zip_code=d.val();const f=`${this.config.international?n.intl_verify:n.us_verify}?av_integration_origin=${window.location.href}&integration=av-elements`,y=new XMLHttpRequest;y.open("POST",f,!0),y.setRequestHeader("Content-Type","application/json"),i&&y.setRequestHeader("Authorization","Basic "+btoa(i+":"));const b=this;return y.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){let t,n=b.parseJSON(y.responseText);if(this.status&&200!==this.status||n.statusCode&&200!==n.statusCode)401===this.status?(console.log("Please sign up on lob.com to get a valid api key."),r.emit("elements.us_verification.error",{code:401,type:"authorization",data:n,form:p[0]}),e(null,!0)):(n=n&&n.body||n,t=b.resolveErrorType(n.error.message),r.emit("elements.us_verification.error",{code:n.error.code||0,type:t,data:n,form:p[0]}),e({msg:g[t],type:t}));else if(n=n&&n.body||n,b.isVerified(n,this.status))r.emit("elements.us_verification.verification",{code:200,data:n,form:p[0]}),e(null,!0,n);else if("deliverable"===n.deliverability){const t=b.createDidYouMeanMessage(n);m.click((()=>{b.fixAndSave(n),b.hideMessages(),m.off("click"),r.emit("elements.us_verification.improvement",{data:n,form:p[0]})})),e({msg:t,type:"confirm"})}else t=b.resolveErrorType(n.deliverability),r.emit("elements.us_verification.error",{code:200,type:"verification",data:n,form:p[0]}),e({msg:g[t],type:t})}},y.send(JSON.stringify(h)),!1}prioritizeHandler(e,t){const n=$._data(e.get(0),"events");n[t].unshift(n[t].pop())}verifyCallback(e,t,n={}){const{autosubmit:i,channel:s,elements:r,override:a,strictness:o,submit:l}=this.config;return l||a?(this.showMessage(e),s.emit("elements.us_verification.verification",{code:200,data:n,form:r.form[0]}),this.config.submitted=!0,this.config.override=!1,r.form.off(".avSubmit",this.preFlight.bind(this)),r.form.unbind(".avSubmit"),i&&(r.form.trigger("submit"),r.form.get(0).submit()),r.form.on("submit.avSubmit",this.preFlight.bind(this)),void this.prioritizeHandler(r.form,"submit")):t?(this.config.submitted=!0,this.config.override=!1,r.form.off(".avSubmit",this.preFlight.bind(this)),r.form.unbind(".avSubmit"),void(i&&(r.form.trigger("submit"),r.form.get(0).submit()))):(this.showMessage(e),void(this.config.override="passthrough"===o||("undeliverable"===e.type?"relaxed"===o:"DEFAULT"!==e.type&&"strict"!==this.config.strictness)))}preFlight=e=>(e.stopImmediatePropagation(),e.preventDefault(),this.hideMessages(),this.config.elements.message.off("click"),this.verify(this.verifyCallback.bind(this)));configureVerification(){const{elements:e}=this.config;if(this.pageState.create_message){const n=$('<div class="lob-verify-message"></div>'),i=e.errorAnchorElement;i.length?n.insertBefore(i):e.form.prepend(n),e.message=n,v||(v=!0,$("<style>").prop("type","text/css").html((t=this.config,`\n  .lob-verify-message {\n    background-color: ${h(t,"err","bgcolor")};\n    border-radius: .25rem;\n    color: ${h(t,"err","color")};\n    display: none;\n    left: 50%;\n    margin-bottom: 1.5rem;\n    margin-right: -50%;\n    margin-top: 1.5rem;\n    max-width: 100%;\n    padding: .5rem;\n    position: relative;\n    text-align: center;\n    transform: translate(-50%, 0%);\n    width: 100%;\n  }\n`)).appendTo("head"))}var t;""!==e.parseResultError&&this.showMessage({type:"form_detection",msg:e.parseResultError}),e.form.on("submit.avSubmit",this.preFlight.bind(this)),this.prioritizeHandler(e.form,"submit")}}var _=n(787),M=n.n(_);const S=()=>{const e=new(M())("lob-address-elements");return{channel:e,instances:[],on:e.on}},x=e=>{const t=(()=>{const e=d("primary")||$(),t=u("primary")||$(),n=m("primary")||$();return e.add(t).add(n)})(),n=[];return t.each(((t,i)=>{const s=(i=$(i)).closest("form"),r=((e,t)=>{const n=["false","strict","normal","relaxed","passthrough"];if(e&&n.indexOf(e)>-1)return e;{const e=o("verify",t);return e&&n.indexOf(e)>-1?e:"relaxed"}})(e?e.strictness:null,s),l="true"===o("verify-message",s)||s.length&&!a("verify-message",s).length,c=i.length&&"false"!==o("primary",s),d=o("autosubmit",s)||!0,u="false"!==r&&s.length&&("passthrough"===r||a("verify-message",s).length||l);n.push({autocomplete:c,autosubmit:d,create_message:l,enrich:u||c,form:s,primary:i,strictness:r,verify:u})})),n};!function(){const e=(e,t)=>{window.LobAddressElements||(window.LobAddressElements=S()),t.channel=window.LobAddressElements.channel;const n=n=>{const{enrich:i,form:s}=n,r=s&&s.attr("data-lob-state")||"untouched";"untouched"===r&&i?(s.attr("data-lob-state","enriched"),setTimeout((()=>{const i=new w(e,t,n);window.LobAddressElements||(window.LobAddressElements=S()),window.LobAddressElements.instances.push(i)}),0)):"enriched"!==r||i||s.attr("data-lob-state","untouched")};if((e=>{const i=()=>{x(t).forEach(n)},s=window.MutationObserver||window.WebKitMutationObserver;if(s){new s(i).observe(window.document.body,{subtree:!0,attributes:!0,childList:!0})}i()})(),!x().length)return{do:{init:()=>new w(e,t)}}},t="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js",n={load:function(){const e=Array.prototype.slice.call(arguments[0]),t=n[e.shift()];t&&t.apply(this,e)},jquery:function(){if(window.jQuery)n.load(arguments);else{const e=arguments,i=document.createElement("script");i.onload=function(){n.load(e)},i.src=t,document.getElementsByTagName("body")[0].appendChild(i)}},address_elements:function(){if(window.LobAddressElements)n.load(arguments);else{const t=window.LobAddressElementsConfig||{};window.LobAddressElements=S();const i=e(window.jQuery,t);i&&window.LobAddressElements.instances.push(i),n.load(arguments)}}};n.load(["jquery","address_elements"])}()})()})();
//# sourceMappingURL=address-elements-2.2.3.min.js.map